using UnityEngine;

[RequireComponent(typeof(Rigidbody2D))]//ActionMove.csなどで使う
[RequireComponent(typeof(ActionMove))]

public class ActionController : MonoBehaviour
{
    //他の.csでキャラクターがどの行動を取るか決めるための変数
    public bool IsDead;
    public bool IsDamaged; //thisAction = 5
    public bool IsEvading; //thisAction = 4
    public bool IsAttacking; //thisAction = 3
    public bool IsChanging; //thisAction = 2
    public bool IsMove; //thisAction = 1
    public enum ActionType { None, Move, Changing, Evading, Attacking, Damaged }
    [SerializeField] private ActionType thisAction = ActionType.None;
    public ActionType ThisAction => thisAction;

    //このオブジェクトがプレイヤーかそれ以外か判別し、操作方法を決める
    void Awake()
    {
        if (gameObject.CompareTag("Player"))
        {


        }
        else
        {

        }
    }

    //int thisActionをもとにキャラクターが取る行動を決定
    void Update()
    {
        if (IsDamaged)
        {
            thisAction = ActionType.Damaged;
            if (IsDead)
            {
                Dead();
            }
        }
        else if (IsEvading)
        {
            thisAction = ActionType.Evading;
        }
        else if (IsAttacking)
        {
            thisAction = ActionType.Attacking;
        }
        else if (IsChanging)
        {
            thisAction = ActionType.Changing;
        }
        else if (IsMove)
        {
            thisAction = ActionType.Move;
        }
        else
        {
            thisAction = ActionType.None;
        }
    }

    private bool hasDied = false;
    private void Dead()
    {
        if (hasDied) return;
        hasDied = true;
    }
}